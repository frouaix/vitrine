<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vitrine Component Demo</title>
  <style>
    body {
      margin: 0;
      padding: 20px 20px 50px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f0f0f0;
    }
    h1 { text-align: center; color: #333; }
    p { text-align: center; color: #666; margin-bottom: 24px; }
    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 24px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .demo-card {
      background: white;
      border-radius: 8px;
      padding: 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .demo-card h2 {
      margin: 0 0 12px;
      font-size: 16px;
      color: #444;
    }
    .component-container canvas {
      display: block;
    }
    .page-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      padding: 12px 20px;
      border-top: 1px solid #ccc;
      background: #f0f0f0;
      font-size: 14px;
    }
    .page-nav a {
      color: #1a73e8;
      text-decoration: none;
    }
    .page-nav a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <h1>Vitrine Component Demo</h1>
  <p>Multiple independent Vitrine components, each with its own canvas and render loop.</p>

  <div class="demo-grid">
    <div class="demo-card">
      <h2>GUI Form (Light Theme)</h2>
      <div id="form-component" class="component-container"></div>
    </div>

    <div class="demo-card">
      <h2>GUI Controls (Dark Theme)</h2>
      <div id="controls-component" class="component-container"></div>
    </div>

    <div class="demo-card">
      <h2>Raw Blocks</h2>
      <div id="blocks-component" class="component-container"></div>
    </div>
  </div>

  <script type="module">
    import {
      // GUI controls
      VitrineComponent,
      vstack, hstack, textbox, button, slider, checkbox, label,
      // Themes
      lightTheme, darkTheme
    } from 'vitrine-gui';
    import {
      // Block primitives
      group, rectangle, circle, text
    } from 'vitrine';

    // --- Component 1: A simple form using GUI DSL + light theme ---
    let formName = '';
    let formAge = 25;

    const formComponent = VitrineComponent.gui(
      () => vstack({ dx: 300, dy: 200, duSpacing: 8, duPadding: 12 }, [
        label({ text: 'Registration Form', dx: 276, dy: 24 }),
        textbox({
          text: formName,
          placeholder: 'Enter your name',
          dx: 276, dy: 32,
          onChange: (v) => { formName = v; }
        }),
        hstack({ dx: 276, dy: 32, duSpacing: 8 }, [
          label({ text: `Age: ${formAge}`, dx: 60, dy: 32 }),
          slider({
            value: formAge, min: 0, max: 100, dx: 200, dy: 32,
            onChange: (v) => { formAge = Math.round(v); }
          })
        ]),
        button({
          text: 'Submit',
          dx: 276, dy: 36,
          onClick: () => { alert(`Name: ${formName}, Age: ${formAge}`); }
        })
      ]),
      { width: 300, height: 200, theme: lightTheme }
    );

    // --- Component 2: Controls with dark theme ---
    let checkVal = false;
    let sliderVal = 50;

    const controlsComponent = VitrineComponent.gui(
      () => vstack({ dx: 300, dy: 160, duSpacing: 8, duPadding: 12 }, [
        label({ text: 'Settings', dx: 276, dy: 24 }),
        checkbox({
          checked: checkVal,
          label: 'Enable feature',
          dx: 276, dy: 28,
          onChange: (v) => { checkVal = v; }
        }),
        hstack({ dx: 276, dy: 32, duSpacing: 8 }, [
          label({ text: `Volume: ${Math.round(sliderVal)}%`, dx: 120, dy: 32 }),
          slider({
            value: sliderVal, min: 0, max: 100, dx: 148, dy: 32,
            onChange: (v) => { sliderVal = v; }
          })
        ]),
        button({ text: 'Apply', dx: 276, dy: 36 })
      ]),
      { width: 300, height: 160, theme: darkTheme }
    );

    // --- Component 3: Raw block rendering (animated) ---
    const blocksComponent = VitrineComponent.block(
      () => {
        const t = Date.now() / 1000;
        return group({ x: 0, y: 0 }, [
          rectangle({ dx: 300, dy: 200, fill: '#1a1a2e' }),
          circle({
            x: 150 + Math.cos(t) * 60,
            y: 100 + Math.sin(t) * 40,
            radius: 30,
            fill: '#e94560'
          }),
          circle({
            x: 150 + Math.cos(t + 2) * 60,
            y: 100 + Math.sin(t + 2) * 40,
            radius: 20,
            fill: '#0f3460'
          }),
          text({
            x: 150, y: 180,
            text: 'Animated Blocks',
            fontSize: 14, fill: '#e0e0e0',
            align: 'center', baseline: 'middle'
          })
        ]);
      },
      { width: 300, height: 200 }
    );

    // Mount all components
    formComponent.mount(document.getElementById('form-component'));
    controlsComponent.mount(document.getElementById('controls-component'));
    blocksComponent.mount(document.getElementById('blocks-component'));
  </script>

  <nav class="page-nav">
    <a href="calendar.html">← Calendar</a>
    <a href="gallery.html">Gallery →</a>
  </nav>
</body>
</html>
