(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();var u=(i=>(i.Rectangle="rectangle",i.Circle="circle",i.Ellipse="ellipse",i.Path="path",i.Line="line",i.Text="text",i.Image="image",i.Arc="arc",i.Group="group",i.Layer="layer",i))(u||{});class y{a;b;c;d;e;f;constructor(t=1,e=0,r=0,n=1,o=0,a=0){this.a=t,this.b=e,this.c=r,this.d=n,this.e=o,this.f=a}static identity(){return new y}static translation(t,e){return new y(1,0,0,1,t,e)}static rotation(t){const e=Math.cos(t),r=Math.sin(t);return new y(e,r,-r,e,0,0)}static scale(t,e){return new y(t,0,0,e,0,0)}static skew(t,e){return new y(1,Math.tan(e),Math.tan(t),1,0,0)}clone(){return new y(this.a,this.b,this.c,this.d,this.e,this.f)}multiply(t){const e=this.a*t.a+this.c*t.b,r=this.b*t.a+this.d*t.b,n=this.a*t.c+this.c*t.d,o=this.b*t.c+this.d*t.d,a=this.a*t.e+this.c*t.f+this.e,l=this.b*t.e+this.d*t.f+this.f;return new y(e,r,n,o,a,l)}translate(t,e){return this.multiply(y.translation(t,e))}rotate(t){return this.multiply(y.rotation(t))}scaleXY(t,e){return this.multiply(y.scale(t,e))}skewXY(t,e){return this.multiply(y.skew(t,e))}transformPoint(t,e){return{x:this.a*t+this.c*e+this.e,y:this.b*t+this.d*e+this.f}}invert(){const t=this.a*this.d-this.b*this.c;if(Math.abs(t)<1e-10)return null;const e=1/t;return new y(this.d*e,-this.b*e,-this.c*e,this.a*e,(this.c*this.f-this.d*this.e)*e,(this.b*this.e-this.a*this.f)*e)}toCanvasTransform(){return[this.a,this.b,this.c,this.d,this.e,this.f]}}class K{stack=[];current;constructor(){this.current=y.identity()}save(){this.stack.push(this.current.clone())}restore(){const t=this.stack.pop();t&&(this.current=t)}reset(){this.stack=[],this.current=y.identity()}getCurrent(){return this.current}apply(t){(t.x!==void 0||t.y!==void 0)&&(this.current=this.current.translate(t.x??0,t.y??0)),t.rotation!==void 0&&(this.current=this.current.rotate(t.rotation)),(t.scaleX!==void 0||t.scaleY!==void 0)&&(this.current=this.current.scaleXY(t.scaleX??1,t.scaleY??1)),(t.skewX!==void 0||t.skewY!==void 0)&&(this.current=this.current.skewXY(t.skewX??0,t.skewY??0))}}class G{transformStack;opacity=1;visible=!0;ctx;opacityStack=[];constructor(t){this.ctx=t,this.transformStack=new K}save(){this.ctx.save(),this.transformStack.save(),this.opacityStack.push(this.opacity)}restore(){this.ctx.restore(),this.transformStack.restore();const t=this.opacityStack.pop();t!==void 0&&(this.opacity=t)}applyTransform(t){this.ctx.setTransform(...t.toCanvasTransform())}setOpacity(t){this.opacity=t,this.ctx.globalAlpha=t}clear(){this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}drawRectangle(t,e,r,n,o){o.cornerRadius?this.roundRect(t,e,r,n,o.cornerRadius):(o.fill&&(this.ctx.fillStyle=o.fill,this.ctx.fillRect(t,e,r,n)),o.stroke&&(this.ctx.strokeStyle=o.stroke,this.ctx.lineWidth=o.strokeWidth??1,this.ctx.strokeRect(t,e,r,n)))}roundRect(t,e,r,n,o){this.ctx.beginPath(),this.ctx.moveTo(t+o,e),this.ctx.lineTo(t+r-o,e),this.ctx.arcTo(t+r,e,t+r,e+o,o),this.ctx.lineTo(t+r,e+n-o),this.ctx.arcTo(t+r,e+n,t+r-o,e+n,o),this.ctx.lineTo(t+o,e+n),this.ctx.arcTo(t,e+n,t,e+n-o,o),this.ctx.lineTo(t,e+o),this.ctx.arcTo(t,e,t+o,e,o),this.ctx.closePath(),this.ctx.fillStyle&&this.ctx.fill(),this.ctx.strokeStyle&&this.ctx.stroke()}drawCircle(t,e,r,n){this.ctx.beginPath(),this.ctx.arc(t,e,r,0,Math.PI*2),n.fill&&(this.ctx.fillStyle=n.fill,this.ctx.fill()),n.stroke&&(this.ctx.strokeStyle=n.stroke,this.ctx.lineWidth=n.strokeWidth??1,this.ctx.stroke())}drawEllipse(t,e,r,n,o){this.ctx.beginPath(),this.ctx.ellipse(t,e,r,n,0,0,Math.PI*2),o.fill&&(this.ctx.fillStyle=o.fill,this.ctx.fill()),o.stroke&&(this.ctx.strokeStyle=o.stroke,this.ctx.lineWidth=o.strokeWidth??1,this.ctx.stroke())}drawPath(t,e){const r=new Path2D(t);e.fill&&(this.ctx.fillStyle=e.fill,this.ctx.fill(r)),e.stroke&&(this.ctx.strokeStyle=e.stroke,this.ctx.lineWidth=e.strokeWidth??1,this.ctx.stroke(r))}drawLine(t,e,r,n,o){this.ctx.beginPath(),this.ctx.moveTo(t,e),this.ctx.lineTo(r,n),this.ctx.strokeStyle=o.stroke,this.ctx.lineWidth=o.strokeWidth??1,this.ctx.stroke()}drawText(t,e,r,n){n.font&&(this.ctx.font=n.font),n.fontSize&&(this.ctx.font=`${n.fontSize}px sans-serif`),n.align&&(this.ctx.textAlign=n.align),n.baseline&&(this.ctx.textBaseline=n.baseline),n.fill&&(this.ctx.fillStyle=n.fill,this.ctx.fillText(t,e,r)),n.stroke&&(this.ctx.strokeStyle=n.stroke,this.ctx.lineWidth=n.strokeWidth??1,this.ctx.strokeText(t,e,r))}drawImage(t,e,r,n,o,a){this.ctx.drawImage(t,e,r,n,o)}drawArc(t,e,r,n,o,a){this.ctx.beginPath(),this.ctx.arc(t,e,r,n,o),a.fill&&(this.ctx.fillStyle=a.fill,this.ctx.fill()),a.stroke&&(this.ctx.strokeStyle=a.stroke,this.ctx.lineWidth=a.strokeWidth??1,this.ctx.stroke())}}class z{static hitTest(t,e,r,n=y.identity()){if(t.props.visible===!1)return null;const o=this.getBlockTransform(t.props),a=n.multiply(o),l=a.invert();if(!l)return null;const s=l.transformPoint(e,r);if(t.children)for(let c=t.children.length-1;c>=0;c--){const d=this.hitTest(t.children[c],e,r,a);if(d)return d}return this.hitTestShape(t,s.x,s.y)?{block:t,localX:s.x,localY:s.y,worldX:e,worldY:r}:null}static getBlockTransform(t){let e=y.identity();return(t.x!==void 0||t.y!==void 0)&&(e=e.translate(t.x??0,t.y??0)),t.rotation!==void 0&&(e=e.rotate(t.rotation)),(t.scaleX!==void 0||t.scaleY!==void 0)&&(e=e.scaleXY(t.scaleX??1,t.scaleY??1)),(t.skewX!==void 0||t.skewY!==void 0)&&(e=e.skewXY(t.skewX??0,t.skewY??0)),e}static hitTestShape(t,e,r){const n=t.props;switch(t.type){case u.Rectangle:return this.hitTestRectangle(e,r,n.width,n.height);case u.Circle:return this.hitTestCircle(e,r,n.radius);case u.Ellipse:return this.hitTestEllipse(e,r,n.radiusX,n.radiusY);case u.Line:return this.hitTestLine(e,r,n.x1,n.y1,n.x2,n.y2,n.strokeWidth??1);case u.Text:const o=n.fontSize??16,a=n.text.length*o*.6;return this.hitTestRectangle(e,r,a,o);case u.Arc:return this.hitTestArc(e,r,n.radius,n.startAngle,n.endAngle);case u.Group:case u.Layer:return!1;default:return!1}}static hitTestRectangle(t,e,r,n){return t>=0&&t<=r&&e>=0&&e<=n}static hitTestCircle(t,e,r){return t*t+e*e<=r*r}static hitTestEllipse(t,e,r,n){return t*t/(r*r)+e*e/(n*n)<=1}static hitTestLine(t,e,r,n,o,a,l){const s=o-r,c=a-n,d=s*s+c*c;if(d===0)return Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))<=l/2;const f=Math.max(0,Math.min(1,((t-r)*s+(e-n)*c)/d)),m=r+f*s,v=n+f*c;return Math.sqrt((t-m)*(t-m)+(e-v)*(e-v))<=l/2}static hitTestArc(t,e,r,n,o){const a=Math.sqrt(t*t+e*e);if(Math.abs(a-r)>5)return!1;let s=Math.atan2(e,t);s<0&&(s+=Math.PI*2);let c=n,d=o;return c<0&&(c+=Math.PI*2),d<0&&(d+=Math.PI*2),d<c?s>=c||s<=d:s>=c&&s<=d}static getBounds(t,e=y.identity()){const r=this.getBlockTransform(t.props),n=e.multiply(r),o=this.getLocalBounds(t);if(!o)return null;const a=[n.transformPoint(o.x,o.y),n.transformPoint(o.x+o.width,o.y),n.transformPoint(o.x,o.y+o.height),n.transformPoint(o.x+o.width,o.y+o.height)],l=Math.min(...a.map(f=>f.x)),s=Math.max(...a.map(f=>f.x)),c=Math.min(...a.map(f=>f.y)),d=Math.max(...a.map(f=>f.y));return{x:l,y:c,width:s-l,height:d-c}}static getLocalBounds(t){const e=t.props;switch(t.type){case u.Rectangle:return{x:0,y:0,width:e.width,height:e.height};case u.Circle:return{x:-e.radius,y:-e.radius,width:e.radius*2,height:e.radius*2};case u.Ellipse:return{x:-e.radiusX,y:-e.radiusY,width:e.radiusX*2,height:e.radiusY*2};case u.Line:const r=Math.min(e.x1,e.x2),n=Math.max(e.x1,e.x2),o=Math.min(e.y1,e.y2),a=Math.max(e.y1,e.y2);return{x:r,y:o,width:n-r,height:a-o};case u.Text:const l=e.fontSize??16;return{x:0,y:0,width:e.text.length*l*.6,height:l};default:return null}}}class U{canvas;currentScene=null;hoveredBlock=null;draggedBlock=null;dragStart=null;constructor(t){this.canvas=t,this.setupEventListeners()}setScene(t){this.currentScene=t}setupEventListeners(){this.canvas.addEventListener("pointerdown",this.handlePointerDown.bind(this)),this.canvas.addEventListener("pointerup",this.handlePointerUp.bind(this)),this.canvas.addEventListener("pointermove",this.handlePointerMove.bind(this)),this.canvas.addEventListener("click",this.handleClick.bind(this)),this.canvas.addEventListener("pointerleave",this.handlePointerLeave.bind(this))}destroy(){this.canvas.removeEventListener("pointerdown",this.handlePointerDown.bind(this)),this.canvas.removeEventListener("pointerup",this.handlePointerUp.bind(this)),this.canvas.removeEventListener("pointermove",this.handlePointerMove.bind(this)),this.canvas.removeEventListener("click",this.handleClick.bind(this)),this.canvas.removeEventListener("pointerleave",this.handlePointerLeave.bind(this))}getCanvasCoordinates(t){const e=this.canvas.getBoundingClientRect(),r=this.canvas.width/e.width,n=this.canvas.height/e.height;return{x:(t.clientX-e.left)*r,y:(t.clientY-e.top)*n}}createEventData(t){const e=this.getCanvasCoordinates(t);return{x:e.x,y:e.y,button:t.button,buttons:t.buttons,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey,originalEvent:t}}handleClick(t){if(!this.currentScene)return;const e=this.getCanvasCoordinates(t),r=z.hitTest(this.currentScene,e.x,e.y);r&&r.block.props.onClick&&r.block.props.onClick(t)}handlePointerDown(t){if(!this.currentScene)return;const e=this.getCanvasCoordinates(t),r=z.hitTest(this.currentScene,e.x,e.y);r&&(r.block.props.onPointerDown&&r.block.props.onPointerDown(t),r.block.props.onDrag&&(this.draggedBlock=r.block,this.dragStart=e))}handlePointerUp(t){if(!this.currentScene)return;const e=this.getCanvasCoordinates(t),r=z.hitTest(this.currentScene,e.x,e.y);r&&r.block.props.onPointerUp&&r.block.props.onPointerUp(t),this.draggedBlock=null,this.dragStart=null}handlePointerMove(t){if(!this.currentScene)return;const e=this.getCanvasCoordinates(t);this.draggedBlock&&this.dragStart&&this.draggedBlock.props.onDrag&&this.draggedBlock.props.onDrag(t);const r=z.hitTest(this.currentScene,e.x,e.y),n=r?r.block:null;n!==this.hoveredBlock&&(this.hoveredBlock&&this.hoveredBlock.props.onHover,this.hoveredBlock=n,this.hoveredBlock&&this.hoveredBlock.props.onHover&&this.hoveredBlock.props.onHover(t),this.canvas.style.cursor=this.hoveredBlock?"pointer":"default"),r&&r.block.props.onPointerMove&&r.block.props.onPointerMove(t)}handlePointerLeave(t){this.hoveredBlock=null,this.draggedBlock=null,this.dragStart=null,this.canvas.style.cursor="default"}static hasEventHandlers(t){return!!(t.props.onClick||t.props.onPointerDown||t.props.onPointerUp||t.props.onPointerMove||t.props.onHover||t.props.onDrag)}}class w{static isInViewport(t,e){return!(t.x+t.width<e.x||t.x>e.x+e.width||t.y+t.height<e.y||t.y>e.y+e.height)}static cullBlocks(t,e,r=y.identity()){if(t.props.visible===!1)return!1;const n=this.getBlockTransform(t.props),o=r.multiply(n),a=z.getBounds(t,o);return a?this.isInViewport(a,e):!0}static getBlockTransform(t){let e=y.identity();return(t.x!==void 0||t.y!==void 0)&&(e=e.translate(t.x??0,t.y??0)),t.rotation!==void 0&&(e=e.rotate(t.rotation)),(t.scaleX!==void 0||t.scaleY!==void 0)&&(e=e.scaleXY(t.scaleX??1,t.scaleY??1)),(t.skewX!==void 0||t.skewY!==void 0)&&(e=e.skewXY(t.skewX??0,t.skewY??0)),e}static transformPool=[];static pointPool=[];static getPooledTransform(){return this.transformPool.pop()||y.identity()}static returnPooledTransform(t){this.transformPool.length<1e3&&this.transformPool.push(t)}static getPooledPoint(){return this.pointPool.pop()||{x:0,y:0}}static returnPooledPoint(t){this.pointPool.length<1e3&&this.pointPool.push(t)}static stats={blocksRendered:0,blocksCulled:0,renderTime:0,fps:0};static resetStats(){this.stats.blocksRendered=0,this.stats.blocksCulled=0}}class q{frameCount=0;lastTime=performance.now();fpsHistory=[];update(){this.frameCount++;const t=performance.now(),e=t-this.lastTime;if(e>=1e3){const r=this.frameCount/e*1e3;this.fpsHistory.push(r),this.fpsHistory.length>60&&this.fpsHistory.shift(),w.stats.fps=Math.round(r),this.frameCount=0,this.lastTime=t}}getAverageFPS(){if(this.fpsHistory.length===0)return 0;const t=this.fpsHistory.reduce((e,r)=>e+r,0);return Math.round(t/this.fpsHistory.length)}getStats(){return{...w.stats,averageFPS:this.getAverageFPS()}}}class J{canvas;context;width;height;pixelRatio;eventManager=null;enableCulling;viewport;perfMonitor;constructor(t={}){this.canvas=t.canvas||document.createElement("canvas"),this.width=t.width||800,this.height=t.height||600,this.pixelRatio=t.pixelRatio||window.devicePixelRatio||1,this.enableCulling=t.enableCulling??!0,this.viewport={x:0,y:0,width:this.width,height:this.height},this.setupCanvas();const e=this.canvas.getContext("2d");if(!e)throw new Error("Failed to get 2D context");this.context=new G(e),t.enableEvents!==!1&&(this.eventManager=new U(this.canvas)),this.perfMonitor=new q}setupCanvas(){this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio,this.canvas.style.width=`${this.width}px`,this.canvas.style.height=`${this.height}px`}getCanvas(){return this.canvas}resize(t,e){this.width=t,this.height=e,this.viewport.width=t,this.viewport.height=e,this.setupCanvas()}render(t){const e=performance.now();if(w.resetStats(),this.context.clear(),this.context.save(),this.pixelRatio!==1){const r=this.context.transformStack.getCurrent().scaleXY(this.pixelRatio,this.pixelRatio);this.context.applyTransform(r)}this.renderBlock(t),this.context.restore(),this.eventManager&&this.eventManager.setScene(t),w.stats.renderTime=performance.now()-e,this.perfMonitor.update()}getPerformanceStats(){return this.perfMonitor.getStats()}destroy(){this.eventManager&&this.eventManager.destroy()}renderBlock(t){if(t.props.visible===!1)return;if(this.enableCulling&&!w.cullBlocks(t,this.viewport,this.context.transformStack.getCurrent())){w.stats.blocksCulled++;return}w.stats.blocksRendered++,this.context.save(),this.context.transformStack.save(),this.context.transformStack.apply(t.props),this.context.applyTransform(this.context.transformStack.getCurrent());const e=this.context.opacity,r=t.props.opacity??1;if(this.context.setOpacity(e*r),t.props.shadow){const n=this.context.ctx;n&&(n.shadowOffsetX=t.props.shadow.offsetX,n.shadowOffsetY=t.props.shadow.offsetY,n.shadowBlur=t.props.shadow.blur,n.shadowColor=t.props.shadow.color)}switch(t.type){case u.Rectangle:this.renderRectangle(t);break;case u.Circle:this.renderCircle(t);break;case u.Ellipse:this.renderEllipse(t);break;case u.Path:this.renderPath(t);break;case u.Line:this.renderLine(t);break;case u.Text:this.renderText(t);break;case u.Image:this.renderImage(t);break;case u.Arc:this.renderArc(t);break;case u.Group:case u.Layer:break}if(t.children)for(const n of t.children)this.renderBlock(n);this.context.transformStack.restore(),this.context.restore()}renderRectangle(t){const e=t.props;this.context.drawRectangle(0,0,e.width,e.height,e)}renderCircle(t){const e=t.props;this.context.drawCircle(0,0,e.radius,e)}renderEllipse(t){const e=t.props;this.context.drawEllipse(0,0,e.radiusX,e.radiusY,e)}renderPath(t){const e=t.props;this.context.drawPath(e.pathData,e)}renderLine(t){const e=t.props;this.context.drawLine(e.x1,e.y1,e.x2,e.y2,e)}renderText(t){const e=t.props;this.context.drawText(e.text,0,0,e)}renderImage(t){const e=t.props,r=typeof e.src=="string"?new Image:e.src;typeof e.src=="string"&&r instanceof HTMLImageElement&&(r.src=e.src),this.context.drawImage(r,0,0,e.width,e.height,e)}renderArc(t){const e=t.props;this.context.drawArc(0,0,e.radius,e.startAngle,e.endAngle,e)}}function x(i,t){return{type:u.Rectangle,props:i,children:t}}function b(i,t){return{type:u.Circle,props:i,children:t}}function Z(i,t){return{type:u.Ellipse,props:i,children:t}}function S(i,t){return{type:u.Line,props:i,children:t}}function h(i,t){return{type:u.Text,props:i,children:t}}function B(i,t){return{type:u.Path,props:i,children:t}}function W(i,t){return{type:u.Arc,props:i,children:t}}function g(i,t){return{type:u.Group,props:i,children:t}}const Q={id:"bar-chart",name:"Bar Chart",description:"Animated bar chart with hover tooltips",init:()=>({data:[{label:"Jan",value:45,color:"#ff6b6b"},{label:"Feb",value:62,color:"#4dabf7"},{label:"Mar",value:38,color:"#51cf66"},{label:"Apr",value:71,color:"#ffd43b"},{label:"May",value:55,color:"#ff8787"},{label:"Jun",value:82,color:"#a9e34b"},{label:"Jul",value:68,color:"#ff6b6b"},{label:"Aug",value:91,color:"#4dabf7"},{label:"Sep",value:77,color:"#51cf66"},{label:"Oct",value:64,color:"#ffd43b"},{label:"Nov",value:53,color:"#ff8787"},{label:"Dec",value:88,color:"#a9e34b"}],animatedValues:Array(12).fill(0),hoveredIndex:-1,time:0}),update:(i,t)=>{i.time+=t;for(let e=0;e<i.data.length;e++){const r=i.data[e].value,n=i.animatedValues[e],o=2;i.animatedValues[e]+=(r-n)*o*t}},render:i=>{const o=680/i.data.length,a=i.data.map((l,s)=>{const c=i.animatedValues[s]/100*500,d=60+s*o,f=550-c,m=i.hoveredIndex===s;return g({x:d,y:f},[x({width:o-10,height:c,fill:l.color,opacity:m?1:.8,cornerRadius:4,onHover:()=>{i.hoveredIndex=s},onClick:()=>console.log(`Clicked: ${l.label}`)}),...m?[h({x:(o-10)/2,y:-10,text:l.value.toString(),fontSize:14,fill:"#fff",align:"center"})]:[],h({x:(o-10)/2,y:c+20,text:l.label,fontSize:12,fill:"#aaa",align:"center"})])});return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:30,text:"Monthly Sales Data",fontSize:24,fill:"#e0e0e0",align:"center"}),S({x1:60,y1:50,x2:60,y2:550,stroke:"#333",strokeWidth:2}),S({x1:60,y1:550,x2:740,y2:550,stroke:"#333",strokeWidth:2}),...Array.from({length:5},(l,s)=>{const c=550-125*s;return g({x:0,y:0},[S({x1:60,y1:c,x2:740,y2:c,stroke:"#222",strokeWidth:1}),h({x:50,y:c,text:(s*25).toString(),fontSize:11,fill:"#666",align:"right",baseline:"middle"})])}),...a])},code:`// Bar Chart with animation and hover
const data = [...]; // Monthly sales data

state.data.map((item, i) => {
  const barHeight = (value / maxValue) * chartHeight;
  
  return rectangle({
    width: barWidth,
    height: barHeight,
    fill: item.color,
    opacity: isHovered ? 1 : 0.8,
    onHover: () => highlightBar(i)
  });
});`},_={id:"line-chart",name:"Line Chart",description:"Real-time streaming data visualization",init:()=>({dataPoints:Array.from({length:50},(i,t)=>({x:t,y:50+Math.sin(t*.2)*20+Math.random()*10})),time:0}),update:(i,t)=>{if(i.time+=t,Math.floor(i.time*10)>i.dataPoints.length-50){const e=i.dataPoints[i.dataPoints.length-1].x;i.dataPoints.push({x:e+1,y:50+Math.sin(e*.2)*20+Math.random()*10}),i.dataPoints.length>50&&i.dataPoints.shift()}},render:i=>{const n=13.877551020408163,o=400/100,a=[];for(let s=0;s<i.dataPoints.length-1;s++){const c=i.dataPoints[s],d=i.dataPoints[s+1];a.push(S({x1:60+s*n,y1:500-c.y*o,x2:60+(s+1)*n,y2:500-d.y*o,stroke:"#4dabf7",strokeWidth:2}))}const l=i.dataPoints.map((s,c)=>b({x:60+c*n,y:500-s.y*o,radius:3,fill:"#4dabf7",opacity:c===i.dataPoints.length-1?1:.6}));return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:30,text:"Real-Time Data Stream",fontSize:24,fill:"#e0e0e0",align:"center"}),...Array.from({length:5},(s,c)=>{const d=500-100*c;return S({x1:60,y1:d,x2:740,y2:d,stroke:"#222",strokeWidth:1})}),S({x1:60,y1:100,x2:60,y2:500,stroke:"#333",strokeWidth:2}),S({x1:60,y1:500,x2:740,y2:500,stroke:"#333",strokeWidth:2}),...a,...l,h({x:400,y:560,text:`Current: ${i.dataPoints[i.dataPoints.length-1].y.toFixed(1)}`,fontSize:16,fill:"#4dabf7",align:"center"})])},code:`// Real-time line chart
state.dataPoints.map((p, i) => {
  if (i === 0) return null;
  const prev = state.dataPoints[i - 1];
  
  return line({
    x1: prev.x * scaleX,
    y1: prev.y * scaleY,
    x2: p.x * scaleX,
    y2: p.y * scaleY,
    stroke: '#4dabf7',
    strokeWidth: 2
  });
});`},tt={id:"pie-chart",name:"Pie Chart",description:"Interactive pie segments with click actions",init:()=>({data:[{label:"Product A",value:35,color:"#ff6b6b"},{label:"Product B",value:25,color:"#4dabf7"},{label:"Product C",value:20,color:"#51cf66"},{label:"Product D",value:15,color:"#ffd43b"},{label:"Product E",value:5,color:"#ff8787"}],hoveredIndex:-1,selectedIndex:-1,rotation:0}),update:(i,t)=>{i.rotation+=t*.2},render:i=>{const n=i.data.reduce((s,c)=>s+c.value,0);let o=-Math.PI/2+i.rotation;const a=[],l=[];return i.data.forEach((s,c)=>{const d=s.value/n*Math.PI*2,f=o+d,m=o+d/2,v=i.hoveredIndex===c,k=i.selectedIndex===c,p=v||k?15:0,M=Math.cos(m)*p,T=Math.sin(m)*p;a.push(g({x:300+M,y:300+T},[W({radius:150,startAngle:o,endAngle:f,fill:s.color,stroke:"#000",strokeWidth:2,opacity:v?1:.9,onHover:()=>{i.hoveredIndex=c},onClick:()=>{i.selectedIndex=i.selectedIndex===c?-1:c,console.log(`Selected: ${s.label}`)}})]));const X=190,I=300+Math.cos(m)*X,Y=300+Math.sin(m)*X;l.push(g({x:I,y:Y},[h({text:s.label,fontSize:14,fill:s.color,align:"center",baseline:"middle"}),h({y:18,text:`${s.value}%`,fontSize:12,fill:"#aaa",align:"center",baseline:"middle"})])),o=f}),g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:30,text:"Sales Distribution",fontSize:24,fill:"#e0e0e0",align:"center"}),b({x:300,y:300,radius:60,fill:"#0a0a0a",stroke:"#333",strokeWidth:2}),h({x:300,y:300,text:"Total",fontSize:14,fill:"#666",align:"center",baseline:"middle"}),h({x:300,y:320,text:"100%",fontSize:20,fill:"#e0e0e0",align:"center",baseline:"middle"}),...a,...l,...i.data.map((s,c)=>g({x:550,y:150+c*40},[x({width:20,height:20,fill:s.color,cornerRadius:4}),h({x:30,y:10,text:`${s.label} (${s.value}%)`,fontSize:14,fill:"#e0e0e0",baseline:"middle"})]))])},code:`// Interactive pie chart
data.forEach((item, i) => {
  const angle = (item.value / total) * Math.PI * 2;
  
  return arc({
    radius: 150,
    startAngle: currentAngle,
    endAngle: currentAngle + angle,
    fill: item.color,
    onHover: () => highlight(i),
    onClick: () => select(i)
  });
});`},et={id:"scatter-plot",name:"Scatter Plot",description:"Thousands of data points for performance",init:()=>({points:Array.from({length:5e3},()=>({x:Math.random()*100,y:Math.random()*100,size:2+Math.random()*4,color:["#ff6b6b","#4dabf7","#51cf66","#ffd43b"][Math.floor(Math.random()*4)]})),time:0}),update:(i,t)=>{i.time+=t},render:i=>{const n=i.points.map(o=>b({x:60+o.x/100*680,y:550-o.y/100*500,radius:o.size,fill:o.color,opacity:.6}));return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:30,text:`Scatter Plot (${i.points.length.toLocaleString()} points)`,fontSize:24,fill:"#e0e0e0",align:"center"}),x({x:60,y:50,width:2,height:500,fill:"#333"}),x({x:60,y:550,width:680,height:2,fill:"#333"}),...Array.from({length:5},(o,a)=>x({x:60,y:550-500/4*a,width:680,height:1,fill:"#1a1a1a"})),...n])},code:`// 5000+ points rendered efficiently
const points = generateRandomData(5000);

points.map(p => 
  circle({
    x: p.x * scale,
    y: p.y * scale,
    radius: p.size,
    fill: p.color,
    opacity: 0.6
  })
);`},it={id:"gauge",name:"Gauge",description:"Animated speedometer with smooth needle",init:()=>({value:0,targetValue:65,time:0}),update:(i,t)=>{i.time+=t,i.value+=(i.targetValue-i.value)*2*t,Math.floor(i.time)%3===0&&i.time%1<t&&(i.targetValue=Math.random()*100)},render:i=>{const n=-Math.PI*.75,o=Math.PI*.75,a=n+(o-n)*(i.value/100),l=s=>s<33?"#51cf66":s<66?"#ffd43b":"#ff6b6b";return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:40,text:"Performance Gauge",fontSize:24,fill:"#e0e0e0",align:"center"}),W({x:400,y:350,radius:180,startAngle:n,endAngle:o,stroke:"#2a2a2a",strokeWidth:30}),W({x:400,y:350,radius:180,startAngle:n,endAngle:a,stroke:l(i.value),strokeWidth:30}),...Array.from({length:11},(s,c)=>{const d=n+(o-n)*(c/10),f=130,m=145,v=400+Math.cos(d)*f,k=350+Math.sin(d)*f,p=400+Math.cos(d)*m,M=350+Math.sin(d)*m;return g({x:0,y:0},[S({x1:v,y1:k,x2:p,y2:M,stroke:"#666",strokeWidth:2}),h({x:400+Math.cos(d)*210,y:350+Math.sin(d)*210,text:(c*10).toString(),fontSize:12,fill:"#888",align:"center",baseline:"middle"})])}),g({x:400,y:350,rotation:a},[S({x1:0,y1:0,x2:120,y2:0,stroke:"#fff",strokeWidth:4}),b({radius:12,fill:"#fff"})]),b({x:400,y:350,radius:80,fill:"#1a1a1a",stroke:"#333",strokeWidth:2}),h({x:400,y:340,text:Math.round(i.value).toString(),fontSize:36,fill:l(i.value),align:"center",baseline:"middle"}),h({x:400,y:375,text:"km/h",fontSize:14,fill:"#666",align:"center",baseline:"middle"})])},code:`// Animated gauge with needle
const angle = startAngle + 
  (endAngle - startAngle) * (value / 100);

group({ rotation: angle }, [
  line({ x1: 0, y1: 0, x2: radius, y2: 0 })
]);`},nt={id:"kanban",name:"Kanban Board",description:"Draggable task cards between columns",init:()=>({columns:[{id:"todo",title:"To Do",color:"#ff6b6b"},{id:"progress",title:"In Progress",color:"#ffd43b"},{id:"done",title:"Done",color:"#51cf66"}],cards:[{id:1,column:"todo",title:"Design mockups",desc:"Create UI designs"},{id:2,column:"todo",title:"API integration",desc:"Connect backend"},{id:3,column:"progress",title:"User auth",desc:"Login system"},{id:4,column:"progress",title:"Database schema",desc:"Define models"},{id:5,column:"done",title:"Project setup",desc:"Initialize repo"}],draggedCard:null,hoveredColumn:null}),update:(i,t)=>{},render:i=>{const n=i.columns.map((o,a)=>{const l=40+a*260,s=i.cards.filter(c=>c.column===o.id);return g({x:l,y:100},[x({width:240,height:60,fill:o.color,cornerRadius:8}),h({x:120,y:20,text:o.title,fontSize:16,fill:"#fff",align:"center",baseline:"middle"}),h({x:120,y:40,text:`${s.length} tasks`,fontSize:12,fill:"rgba(255,255,255,0.7)",align:"center",baseline:"middle"}),x({y:70,width:240,height:400,fill:"#1a1a1a",stroke:"#333",strokeWidth:2,cornerRadius:8,onHover:()=>{i.hoveredColumn=o.id}}),...s.map((c,d)=>g({y:80+d*110},[x({width:220,x:10,height:100,fill:"#2a2a2a",stroke:"#444",strokeWidth:2,cornerRadius:6,onPointerDown:()=>{i.draggedCard=c.id},onClick:()=>console.log(`Card: ${c.title}`)}),h({x:20,y:20,text:c.title,fontSize:14,fill:"#e0e0e0"}),h({x:20,y:45,text:c.desc,fontSize:11,fill:"#888"}),x({x:10,y:70,width:220,height:1,fill:"#444"}),h({x:20,y:85,text:`#${c.id}`,fontSize:10,fill:"#666"})]))])});return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:40,text:"Project Task Board",fontSize:24,fill:"#e0e0e0",align:"center"}),...n,h({x:400,y:570,text:"Click cards to view details â€¢ Drag to move between columns",fontSize:12,fill:"#666",align:"center"})])},code:`// Kanban board with draggable cards
columns.map(col => {
  const cards = getCardsInColumn(col.id);
  
  return group({ x: colX }, [
    columnHeader(col),
    ...cards.map(card => 
      cardComponent({
        onDrag: () => moveCard(card, col)
      })
    )
  ]);
});`},rt={id:"mind-map",name:"Mind Map",description:"Node-based diagram with connections",init:()=>({nodes:[{id:1,x:400,y:300,label:"Main Idea",color:"#4dabf7",level:0},{id:2,x:250,y:200,label:"Concept A",color:"#51cf66",level:1,parent:1},{id:3,x:250,y:400,label:"Concept B",color:"#ffd43b",level:1,parent:1},{id:4,x:550,y:200,label:"Concept C",color:"#ff6b6b",level:1,parent:1},{id:5,x:550,y:400,label:"Concept D",color:"#ff8787",level:1,parent:1},{id:6,x:150,y:150,label:"Detail A1",color:"#51cf66",level:2,parent:2},{id:7,x:150,y:250,label:"Detail A2",color:"#51cf66",level:2,parent:2},{id:8,x:650,y:150,label:"Detail C1",color:"#ff6b6b",level:2,parent:4}],hoveredNode:null,selectedNode:null,time:0}),update:(i,t)=>{i.time+=t},render:i=>{const t=[];i.nodes.forEach(r=>{if(r.parent){const n=i.nodes.find(o=>o.id===r.parent);n&&t.push(S({x1:n.x,y1:n.y,x2:r.x,y2:r.y,stroke:r.color,strokeWidth:2,opacity:.5}))}});const e=i.nodes.map(r=>{const n=i.hoveredNode===r.id,o=i.selectedNode===r.id,a=n||o?1.1:1,l=r.level===0?80:60,s=r.level===0?50:35;return g({x:r.x,y:r.y,scaleX:a,scaleY:a},[Z({radiusX:l,radiusY:s,fill:r.color,stroke:o?"#fff":r.color,strokeWidth:o?3:0,opacity:.9,onHover:()=>{i.hoveredNode=r.id},onClick:()=>{i.selectedNode=i.selectedNode===r.id?null:r.id}}),h({text:r.label,fontSize:r.level===0?16:13,fill:"#000",align:"center",baseline:"middle"})])});return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:30,text:"Interactive Mind Map",fontSize:24,fill:"#e0e0e0",align:"center"}),...t,...e,h({x:400,y:570,text:"Click nodes to select â€¢ Hover to highlight",fontSize:12,fill:"#666",align:"center"})])},code:`// Mind map with node connections
nodes.map(node => {
  const parent = findParent(node);
  
  return group({}, [
    // Connection line
    line({
      x1: parent.x, y1: parent.y,
      x2: node.x, y2: node.y,
      stroke: node.color
    }),
    
    // Node
    ellipse({
      x: node.x, y: node.y,
      radiusX: 60, radiusY: 35,
      fill: node.color,
      onClick: () => select(node)
    })
  ]);
});`},ot={id:"particles",name:"Particle System",description:"Thousands of animated particles",init:()=>({particles:Array.from({length:2e3},()=>({x:400+(Math.random()-.5)*100,y:300+(Math.random()-.5)*100,vx:(Math.random()-.5)*100,vy:(Math.random()-.5)*100,life:1,size:2+Math.random()*3,color:["#ff6b6b","#4dabf7","#51cf66","#ffd43b"][Math.floor(Math.random()*4)]})),time:0,emitterX:400,emitterY:300}),update:(i,t)=>{i.time+=t,i.emitterX=400+Math.cos(i.time)*150,i.emitterY=300+Math.sin(i.time)*150,i.particles.forEach(e=>{e.x+=e.vx*t,e.y+=e.vy*t,e.vy+=100*t,e.life-=t*.5,e.life<=0&&(e.x=i.emitterX,e.y=i.emitterY,e.vx=(Math.random()-.5)*100,e.vy=(Math.random()-.5)*100-50,e.life=1)})},render:i=>{const t=i.particles.map(e=>b({x:e.x,y:e.y,radius:e.size,fill:e.color,opacity:e.life*.8}));return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:30,text:`Particle System (${i.particles.length} particles)`,fontSize:24,fill:"#e0e0e0",align:"center"}),...t,b({x:i.emitterX,y:i.emitterY,radius:10,fill:"#fff",opacity:.5})])},code:`// 2000 particle system with physics
particles.map(p => {
  p.x += p.vx * dt;
  p.y += p.vy * dt;
  p.vy += gravity * dt;
  
  return circle({
    x: p.x, y: p.y,
    radius: p.size,
    fill: p.color,
    opacity: p.life
  });
});`},st={id:"patterns",name:"Geometric Patterns",description:"Tessellations and symmetry",init:()=>({time:0,pattern:0}),update:(i,t)=>{i.time+=t,i.pattern=Math.floor(i.time/5)%3},render:i=>{const t=[at(i),ct(i),lt(i)];return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:30,text:"Geometric Patterns",fontSize:24,fill:"#e0e0e0",align:"center"}),t[i.pattern]])},code:`// Procedural geometric patterns
for (let i = 0; i < rows; i++) {
  for (let j = 0; j < cols; j++) {
    const x = j * spacing;
    const y = i * spacing;
    const hue = (i + j + time) % 360;
    
    circle({
      x, y, radius: size,
      fill: \`hsl(\${hue}, 70%, 60%)\`
    });
  }
}`};function at(i){const t=[];for(let n=0;n<10;n++)for(let o=0;o<14;o++){const a=40+o*60,l=80+n*60,s=((n+o)*30+i.time*50)%360,c=.8+Math.sin(i.time*2+n+o)*.2;t.push(b({x:a,y:l,radius:30*c,fill:`hsl(${s}, 70%, 60%)`,opacity:.7}))}return g({x:0,y:0},t)}function ct(i){const t=[];for(let n=0;n<11;n++)for(let o=0;o<15;o++){const a=40+o*55+n%2*27.5,l=80+n*(55*.866),s=((n*2+o)*25+i.time*30)%360,c=i.time*.5,d=[];for(let f=0;f<6;f++){const m=Math.PI/3*f;d.push(`${f===0?"M":"L"} ${Math.cos(m)*25} ${Math.sin(m)*25}`)}d.push("Z"),t.push(g({x:a,y:l,rotation:c},[B({pathData:d.join(" "),fill:`hsl(${s}, 70%, 60%)`,stroke:"#000",strokeWidth:2,opacity:.8})]))}return g({x:0,y:0},t)}function lt(i){const t=[];for(let r=0;r<15;r++)for(let n=0;n<20;n++){const o=40+n*40,a=80+r*(40*.866),l=((r+n)*20+i.time*40)%360,s=(r+n)%2===0;t.push(B({x:o,y:a,pathData:s?`M 0 0 L 40 0 L ${40/2} ${40*.866} Z`:`M 0 ${40*.866} L 40 ${40*.866} L ${40/2} 0 Z`,fill:`hsl(${l}, 70%, 60%)`,stroke:"#000",strokeWidth:1,opacity:.8}))}return g({x:0,y:0},t)}const dt={id:"clock",name:"Analog Clock",description:"Smooth animated clock face",init:()=>({time:new Date}),update:(i,t)=>{i.time=new Date},render:i=>{const n=i.time.getHours()%12,o=i.time.getMinutes(),a=i.time.getSeconds(),l=i.time.getMilliseconds(),s=a+l/1e3,c=s/60*Math.PI*2-Math.PI/2,d=(o+s/60)/60*Math.PI*2-Math.PI/2,f=(n+o/60)/12*Math.PI*2-Math.PI/2,m=Array.from({length:12},(v,k)=>{const p=k/12*Math.PI*2-Math.PI/2,M=160,T=175,X=400+Math.cos(p)*M,I=300+Math.sin(p)*M,Y=400+Math.cos(p)*T,N=300+Math.sin(p)*T;return g({x:0,y:0},[S({x1:X,y1:I,x2:Y,y2:N,stroke:"#666",strokeWidth:3}),h({x:400+Math.cos(p)*210,y:300+Math.sin(p)*210,text:(k===0?12:k).toString(),fontSize:20,fill:"#888",align:"center",baseline:"middle"})])});return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:40,text:"Analog Clock",fontSize:24,fill:"#e0e0e0",align:"center"}),b({x:400,y:300,radius:190,stroke:"#333",strokeWidth:8}),b({x:400,y:300,radius:180,fill:"#1a1a1a"}),...m,g({x:400,y:300,rotation:f},[S({x1:0,y1:0,x2:180*.5,y2:0,stroke:"#fff",strokeWidth:6})]),g({x:400,y:300,rotation:d},[S({x1:0,y1:0,x2:180*.7,y2:0,stroke:"#4dabf7",strokeWidth:4})]),g({x:400,y:300,rotation:c},[S({x1:-20,y1:0,x2:180*.85,y2:0,stroke:"#ff6b6b",strokeWidth:2})]),b({x:400,y:300,radius:8,fill:"#fff"}),h({x:400,y:520,text:i.time.toLocaleTimeString(),fontSize:18,fill:"#666",align:"center"})])},code:`// Smooth animated clock
const hours = time.getHours() % 12;
const minutes = time.getMinutes();
const seconds = time.getSeconds() + 
                 time.getMilliseconds() / 1000;

const angle = (hours / 12) * Math.PI * 2;

group({ rotation: angle }, [
  line({ x1: 0, y1: 0, x2: radius, y2: 0 })
]);`},ht={id:"color-picker",name:"Color Picker",description:"Custom HSV color selection UI",init:()=>({hue:200,saturation:80,value:90,presets:["#ff6b6b","#4dabf7","#51cf66","#ffd43b","#ff8787","#a9e34b","#cc5de8","#ff922b"]}),update:(i,t)=>{},render:i=>{const t=(l,s,c)=>{s/=100,c/=100;const d=c*s,f=d*(1-Math.abs(l/60%2-1)),m=c-d;let v,k,p;return l<60?(v=d,k=f,p=0):l<120?(v=f,k=d,p=0):l<180?(v=0,k=d,p=f):l<240?(v=0,k=f,p=d):l<300?(v=f,k=0,p=d):(v=d,k=0,p=f),`rgb(${Math.round((v+m)*255)}, ${Math.round((k+m)*255)}, ${Math.round((p+m)*255)})`},e=t(i.hue,i.saturation,i.value),r=Array.from({length:360},(l,s)=>x({x:100+s,y:200,width:2,height:40,fill:t(s,100,100)})),n=Array.from({length:100},(l,s)=>x({x:100+s*4,y:270,width:5,height:40,fill:t(i.hue,s,i.value)})),o=Array.from({length:100},(l,s)=>x({x:100+s*4,y:340,width:5,height:40,fill:t(i.hue,i.saturation,s)})),a=i.presets.map((l,s)=>b({x:150+s*60,y:470,radius:20,fill:l,stroke:"#fff",strokeWidth:2,onClick:()=>{console.log(`Selected preset: ${l}`)}}));return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:40,text:"Color Picker",fontSize:24,fill:"#e0e0e0",align:"center"}),g({x:250,y:90},[x({width:300,height:80,fill:e,cornerRadius:12,stroke:"#444",strokeWidth:2}),h({x:150,y:100,text:e,fontSize:16,fill:i.value>50?"#000":"#fff",align:"center"})]),h({x:50,y:220,text:"Hue",fontSize:14,fill:"#888"}),h({x:50,y:290,text:"Sat",fontSize:14,fill:"#888"}),h({x:50,y:360,text:"Val",fontSize:14,fill:"#888"}),...r,...n,...o,b({x:100+i.hue,y:220,radius:8,fill:"#fff",stroke:"#000",strokeWidth:2}),b({x:100+i.saturation*4,y:290,radius:8,fill:"#fff",stroke:"#000",strokeWidth:2}),b({x:100+i.value*4,y:360,radius:8,fill:"#fff",stroke:"#000",strokeWidth:2}),h({x:400,y:430,text:"Presets",fontSize:14,fill:"#888",align:"center"}),...a,h({x:400,y:530,text:`H: ${i.hue}Â° S: ${i.saturation}% V: ${i.value}%`,fontSize:14,fill:"#666",align:"center"})])},code:`// HSV Color picker with sliders
const hueBar = Array.from({ length: 360 }, i => 
  rectangle({
    x: i, y: 0,
    width: 1, height: 40,
    fill: hsvToRgb(i, 100, 100)
  })
);

const currentColor = hsvToRgb(h, s, v);`},ft={id:"snake",name:"Snake Game",description:"Classic snake game with keyboard controls",init:()=>{const e={gridSize:20,cellSize:25,snake:[{x:10,y:10},{x:9,y:10},{x:8,y:10}],direction:{x:1,y:0},nextDirection:{x:1,y:0},food:{x:15,y:10},score:0,gameOver:!1,moveTimer:0,moveInterval:.15};return window.addEventListener("keydown",r=>{if(!e.gameOver)switch(r.key){case"ArrowUp":e.direction.y===0&&(e.nextDirection={x:0,y:-1});break;case"ArrowDown":e.direction.y===0&&(e.nextDirection={x:0,y:1});break;case"ArrowLeft":e.direction.x===0&&(e.nextDirection={x:-1,y:0});break;case"ArrowRight":e.direction.x===0&&(e.nextDirection={x:1,y:0});break;case" ":e.gameOver&&ut(e);break}}),e},update:(i,t)=>{if(!i.gameOver&&(i.moveTimer+=t,i.moveTimer>=i.moveInterval)){i.moveTimer=0,i.direction=i.nextDirection;const e=i.snake[0],r={x:e.x+i.direction.x,y:e.y+i.direction.y};if(r.x<0||r.x>=i.gridSize||r.y<0||r.y>=i.gridSize){i.gameOver=!0;return}if(i.snake.some(n=>n.x===r.x&&n.y===r.y)){i.gameOver=!0;return}i.snake.unshift(r),r.x===i.food.x&&r.y===i.food.y?(i.score++,H(i)):i.snake.pop()}},render:i=>{const r=[];for(let a=0;a<i.gridSize;a++)for(let l=0;l<i.gridSize;l++)r.push(x({x:175+a*i.cellSize,y:50+l*i.cellSize,width:i.cellSize-1,height:i.cellSize-1,fill:"#1a1a1a",stroke:"#2a2a2a",strokeWidth:1}));const n=i.snake.map((a,l)=>x({x:175+a.x*i.cellSize,y:50+a.y*i.cellSize,width:i.cellSize-1,height:i.cellSize-1,fill:l===0?"#51cf66":"#4dabf7",cornerRadius:3})),o=b({x:175+i.food.x*i.cellSize+i.cellSize/2,y:50+i.food.y*i.cellSize+i.cellSize/2,radius:i.cellSize/3,fill:"#ff6b6b"});return g({x:0,y:0},[x({width:800,height:600,fill:"#0a0a0a"}),h({x:400,y:25,text:"Snake Game",fontSize:20,fill:"#e0e0e0",align:"center"}),h({x:60,y:250,text:"Score",fontSize:16,fill:"#888"}),h({x:60,y:280,text:i.score.toString(),fontSize:32,fill:"#51cf66"}),h({x:60,y:350,text:`Arrow
Keys`,fontSize:14,fill:"#666"}),...r,...n,o,...i.gameOver?[x({x:250,y:250,width:300,height:150,fill:"rgba(0, 0, 0, 0.9)",stroke:"#ff6b6b",strokeWidth:3,cornerRadius:12}),h({x:400,y:300,text:"GAME OVER",fontSize:28,fill:"#ff6b6b",align:"center",baseline:"middle"}),h({x:400,y:340,text:`Score: ${i.score}`,fontSize:20,fill:"#e0e0e0",align:"center",baseline:"middle"}),h({x:400,y:370,text:"Press SPACE to restart",fontSize:14,fill:"#888",align:"center",baseline:"middle"})]:[]])},cleanup:()=>{},code:`// Snake game with keyboard controls
window.addEventListener('keydown', (e) => {
  switch(e.key) {
    case 'ArrowUp':
      direction = { x: 0, y: -1 };
      break;
    // ... other directions
  }
});

// Move snake
const head = snake[0];
const newHead = {
  x: head.x + direction.x,
  y: head.y + direction.y
};

snake.unshift(newHead);
if (!ateFood) snake.pop();`};function H(i){let t;do t={x:Math.floor(Math.random()*i.gridSize),y:Math.floor(Math.random()*i.gridSize)};while(i.snake.some(e=>e.x===t.x&&e.y===t.y));i.food=t}function ut(i){i.snake=[{x:10,y:10},{x:9,y:10},{x:8,y:10}],i.direction={x:1,y:0},i.nextDirection={x:1,y:0},i.score=0,i.gameOver=!1,H(i)}const A=[{...Q,category:"data-viz"},{..._,category:"data-viz"},{...tt,category:"data-viz"},{...et,category:"data-viz"},{...it,category:"data-viz"},{...nt,category:"productivity"},{...rt,category:"productivity"},{...ot,category:"creative"},{...st,category:"creative"},{...dt,category:"creative"},{...ht,category:"ui"},{...ft,category:"games"}];let C=null,P=null,E=null,$=null,D,O,V,j,F,L;function gt(){$=document.getElementById("canvas"),D=document.getElementById("demo-list"),O=document.getElementById("demo-name"),V=document.getElementById("demo-description"),j=document.getElementById("codePanel"),F=document.getElementById("codeContent"),L=document.getElementById("statsOverlay"),document.getElementById("toggleCode").addEventListener("click",yt),document.getElementById("toggleStats").addEventListener("click",pt),document.getElementById("resetDemo").addEventListener("click",vt),xt(),A.length>0&&R(A[0])}function xt(){const i={"data-viz":{name:"Data Visualization",icon:"ðŸ“Š"},productivity:{name:"Productivity",icon:"ðŸ“‹"},creative:{name:"Creative",icon:"ðŸŽ¨"},ui:{name:"UI Components",icon:"ðŸŽ›ï¸"},games:{name:"Interactive",icon:"ðŸŽ®"}};let t="";for(const[e,r]of Object.entries(i)){const n=A.filter(o=>o.category===e);if(n.length!==0){t+=`<div class="category">${r.name}</div>`;for(const o of n)t+=`
        <div class="demo-item" data-demo-id="${o.id}">
          <span class="icon">${r.icon}</span>
          <div class="info">
            <div class="name">${o.name}</div>
            <div class="desc">${o.description}</div>
          </div>
        </div>
      `}}D.innerHTML=t,document.querySelectorAll(".demo-item").forEach(e=>{e.addEventListener("click",()=>{const r=e.dataset.demoId,n=A.find(o=>o.id===r);n&&R(n)})})}function R(i){C&&C.cleanup&&C.cleanup(),E&&cancelAnimationFrame(E),P&&P.destroy(),O.textContent=i.name,V.textContent=i.description,F.textContent=i.code||"// Code not available",document.querySelectorAll(".demo-item").forEach(o=>{o.classList.toggle("active",o.dataset.demoId===i.id)});const t=i.size||{width:800,height:600};P=new J({canvas:$,width:t.width,height:t.height,enableCulling:i.enableCulling!==!1}),C=i;const e=i.init(P);let r=performance.now();function n(){const o=performance.now(),a=(o-r)/1e3;r=o,i.update&&i.update(e,a);const l=i.render(e);P.render(l),mt(),E=requestAnimationFrame(n)}n()}function mt(){if(!P)return;const i=P.getPerformanceStats();document.getElementById("statFPS").textContent=i.fps||0,document.getElementById("statBlocks").textContent=i.blocksRendered.toLocaleString(),document.getElementById("statCulled").textContent=i.blocksCulled.toLocaleString(),document.getElementById("statRenderTime").textContent=i.renderTime.toFixed(2)}function yt(){j.classList.toggle("hidden")}function pt(){L.style.display=L.style.display==="none"?"block":"none"}function vt(){C&&R(C)}gt();
